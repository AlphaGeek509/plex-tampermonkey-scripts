(()=>{(function(){"use strict";let R=typeof unsafeWindow<"u"?unsafeWindow:window;function g(t=typeof unsafeWindow<"u"?unsafeWindow:window){try{if(typeof lt<"u"&&lt?.core?.data)return{dc:lt.core.data,host:t}}catch{}try{if(t.lt?.core?.data)return{dc:t.lt.core.data,host:t}}catch{}for(let r=0;r<t.frames.length;r++)try{let s=g(t.frames[r]);if(s)return s}catch{}return null}function m(){let t=typeof unsafeWindow<"u"?unsafeWindow:window,r=typeof lt<"u"?lt:t.lt=t.lt||{},s=r.core=r.core||{},o=s.data;if(o||(o=s.data={}),o.createDataContext||(o.createDataContext=function({ns:y,scopeKey:a,persist:n="session",ttlMs:c=null}){let i=n==="local"?t.localStorage:t.sessionStorage,u=`${`lt:${y}:${a}:`}header`;return{makeRepo(){return{async get(){try{let e=i.getItem(u);return e?JSON.parse(e):null}catch{return null}},async getHeader(){return this.get()},async patchHeader(e){let l=await this.get()||{},f=Object.assign({},l,e||{});try{i.setItem(u,JSON.stringify(f))}catch{}return f},async clear(){try{i.removeItem(u)}catch{}},async ensureFromLegacyIfMissing(){}}}}}),!o.makeFlatScopedRepo){let p=function(a){let n=2166136261;for(let c=0;c<a.length;c++)n^=a.charCodeAt(c),n=Math.imul(n,16777619)>>>0;return n>>>0};Object.defineProperty(o,"makeFlatScopedRepo",{value:function({ns:a,entity:n="quote",schema:c=null,persist:i="session",ttlMs:d=null,legacyEntity:u=null}={}){function h(e){let l=typeof e=="string"?p(e):Number(e);if(!Number.isFinite(l)||l<=0)throw new Error("Invalid scopeKey");let f=o.createDataContext({ns:a,scopeKey:l,persist:i,ttlMs:d}),w=f.makeRepo(function(){});return{ctx:f,repo:w}}return{use:h,FlatRepo:function(){},opts:{ns:a,entity:n,schema:c,persist:i,ttlMs:d,legacyEntity:u}}},configurable:!0,writable:!0})}try{console.info?.("[lt-data-core] installed")}catch{}return!0}m()})();})();
